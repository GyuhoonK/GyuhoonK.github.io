<!DOCTYPE html>
<html>
<head>
    
    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>jaydebeapi - Class not found Error</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    </script>
<meta name="description" content="Data Engineering" />
    <link rel="shortcut icon" href="https://gyuhoonk.github.io/assets/built/images/favicon.png" type="image/png" />
    <link rel="canonical" href="https://gyuhoonk.github.io/jaydebeapi_class_not_found" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Gyuhoon Kim" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="jaydebeapi - Class not found Error" />
    <meta property="og:description" content="jaydebeapi로 DB 연결 시 TypeError: Class not found 원인 파악 에러 로그 Oracle와의 connector 생성을 위해 아래와 같이 코드를 작성하여 실행했습니다. conn = jaydebeapi.connect(jclassname="oracle.jdbc.driver.OracleDriver", url="jdbc:oracle://host:port/", jars = "ojdb6.jar") 실행 시 아래와 같이 jclassname을 찾을 수 없다는 내용의 에러가 발생했습니다(Class not found). Traceback (most recent call last): File "connector.py", line 46," />
    <meta property="og:url" content="https://gyuhoonk.github.io/jaydebeapi_class_not_found" />
    <meta property="og:image" content="https://gyuhoonk.github.io/assets/built/images/python/jpype.webp" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2023-03-25T22:30:00+09:00" />
    <meta property="article:modified_time" content="2023-03-25T22:30:00+09:00" />
    <meta property="article:tag" content="Python" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="jaydebeapi - Class not found Error" />
    <meta name="twitter:description" content="jaydebeapi로 DB 연결 시 TypeError: Class not found 원인 파악 에러 로그 Oracle와의 connector 생성을 위해 아래와 같이 코드를 작성하여 실행했습니다. conn = jaydebeapi.connect(jclassname="oracle.jdbc.driver.OracleDriver", url="jdbc:oracle://host:port/", jars = "ojdb6.jar") 실행 시 아래와 같이 jclassname을 찾을 수 없다는 내용의 에러가 발생했습니다(Class not found). Traceback (most recent call last): File "connector.py", line 46," />
    <meta name="twitter:url" content="https://gyuhoonk.github.io/" />
    <meta name="twitter:image" content="https://gyuhoonk.github.io/assets/built/images/python/jpype.webp" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Gyuhoon Kim" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Python" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Gyuhoon Kim",
        "logo": "https://gyuhoonk.github.io/"
    },
    "url": "https://gyuhoonk.github.io/jaydebeapi_class_not_found",
    "image": {
        "@type": "ImageObject",
        "url": "https://gyuhoonk.github.io/assets/built/images/python/jpype.webp",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://gyuhoonk.github.io/jaydebeapi_class_not_found"
    },
    "description": "jaydebeapi로 DB 연결 시 TypeError: Class not found 원인 파악 에러 로그 Oracle와의 connector 생성을 위해 아래와 같이 코드를 작성하여 실행했습니다. conn = jaydebeapi.connect(jclassname="oracle.jdbc.driver.OracleDriver", url="jdbc:oracle://host:port/", jars = "ojdb6.jar") 실행 시 아래와 같이 jclassname을 찾을 수 없다는 내용의 에러가 발생했습니다(Class not found). Traceback (most recent call last): File "connector.py", line 46,"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="jaydebeapi - Class not found Error" href="/feed.xml" />

    
</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://gyuhoonk.github.io/">Gyuhoon Kim</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem">
        <a href="/about/">About</a>
    </li>
    <li class="nav-python" role="menuitem">
        <a href="/tag/python/">python</a>
    </li>
    <li class="nav-scala" role="menuitem">
        <a href="/tag/scala/">scala</a>
    </li>
    <li class="nav-hadoop" role="menuitem">
        <a href="/tag/hadoop/">hadoop</a>
    </li>
    <li class="nav-database" role="menuitem">
        <a href="/tag/database/">database</a>
    </li>
    <li class="nav-database" role="menuitem">
        <a href="/tag/kubernetes/">kubernetes</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/archive.html">All Posts</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/author_archive.html">Tag</a>
    </li>
</ul>
        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Subscribe</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-python post tag-python ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="25 March 2023">25 March 2023</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/python/'>PYTHON</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">jaydebeapi - Class not found Error</h1>
            </header>

            <!-- 
            <figure class="post-full-image" style="background-image: url(/assets/built/images/python/jpype.webp)">
            </figure>
             -->

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>jaydebeapi로 DB 연결 시 <code class="language-plaintext highlighter-rouge">TypeError: Class not found</code> 원인 파악</p>

<h3 id="에러-로그">에러 로그</h3>

<p>Oracle와의 <code class="language-plaintext highlighter-rouge">connector</code> 생성을 위해 아래와 같이 코드를 작성하여 실행했습니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">conn</span> <span class="o">=</span> <span class="n">jaydebeapi</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">jclassname</span><span class="o">=</span><span class="s">"oracle.jdbc.driver.OracleDriver"</span><span class="p">,</span>
                          <span class="n">url</span><span class="o">=</span><span class="s">"jdbc:oracle://host:port/"</span><span class="p">,</span>
                          <span class="n">jars</span> <span class="o">=</span> <span class="s">"ojdb6.jar"</span><span class="p">)</span>
</code></pre></div></div>

<p>실행 시 아래와 같이 <code class="language-plaintext highlighter-rouge">jclassname</code>을 찾을 수 없다는 내용의 에러가 발생했습니다(Class not found).</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Traceback (most recent call last):
  File "connector.py", line 46, in &lt;module&gt;
    conn = jaydebeapi.connect(
  File "/usr/bin/python3/site-packages/jaydebeapi/__init__.py", line 412, in connect
    jconn = _jdbc_connect(jclassname, url, driver_args, jars, libs)
  File "/usr/bin/python3/site-packages/jaydebeapi/__init__.py", line 221, in _jdbc_connect_jpype
    jpype.JClass(jclassname)
  File "/usr/bin/python3/site-packages/jpype/_jclass.py", line 99, in __new__
    return _jpype._getClass(jc)
TypeError: Class oracle.jdbc.driver.OracleDriver is not found
</code></pre></div></div>

<h3 id="원인-파악을-위한-trial-and-error">원인 파악을 위한 trial and error</h3>

<ul>
  <li>jar file<br />
<code class="language-plaintext highlighter-rouge">jclassname</code>, 즉 실행할 클래스를 java 경로에서 찾지 못했다는 이야기이므로 <code class="language-plaintext highlighter-rouge">jars</code>로 전달한 <code class="language-plaintext highlighter-rouge">ojdb6.jar</code>을 의심했습니다. 1) jar 파일 내에 클래스가 존재하지 않거나, 2) 제가 jars를 입력하는 과정에서 오타가 있었을 수 있다고 생각했습니다. 
먼저, jar 파일 내에 클래스가 존재하는지 확인했습니다.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>jar tf ojdb6.jar | <span class="nb">grep </span>OracleDriver
oracle/jdbc/driver/OracleDriver.class
</code></pre></div></div>

<p>아쉽게도(?) jar파일 내에 <code class="language-plaintext highlighter-rouge">oracle.jdbc.driver.OracleDriver</code> 클래스가 존재하고 있었습니다. 또한 제가 jars파일 이름(<code class="language-plaintext highlighter-rouge">ojdb6.jar</code>)을 입력하는 과정에서 문제가 있었던 것도 아니었습니다.</p>

<ul>
  <li>java path / jdk version<br />
Java 버전의 의존성 문제일 수도 있다고 생각했습니다. 현재 M1 칩셋의 맥북을 사용 중이라서 아래와 같이 Zulu java를 사용 중입니다. <code class="language-plaintext highlighter-rouge">JAVA_HOME</code>도 정상적으로 설정되어 있었습니다.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>java <span class="nt">--version</span>
openjdk 15.0.10 2023-01-17
OpenJDK Runtime Environment Zulu15.46+17-CA <span class="o">(</span>build 15.0.10+5-MTS<span class="o">)</span>
OpenJDK 64-Bit Server VM Zulu15.46+17-CA <span class="o">(</span>build 15.0.10+5-MTS, mixed mode<span class="o">)</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$JAVA_HOME</span>
/Users/user/zulu15.46.17-ca-jdk15.0.10-macosx_aarch64/zulu-15.jdk/Contents/Home
</code></pre></div></div>

<p>jar 파일을 압축해제하여  <code class="language-plaintext highlighter-rouge">META-INF/MANIFEST.MF</code> 내용을 확인할 수 있습니다. odjbc는 oracle 홈페이지에서 직접 버전 정보를 확인할 수 있어서 불필요하긴 합니다. hive jdbc로 예를 들어보겠습니다. cloudera에서 배포한 HiveJDBC42의 빌드에서 사용된 jdk 버전은 1.8이었습니다.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>jar xvf HiveJDBC42-2.6.11.1014.jar <span class="c"># jar 파일 압축 해제</span>
<span class="nv">$ </span><span class="nb">cat </span>META-INF/MANIFEST.MF 
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Built-By: SYSTEM
Created-By: Apache Maven 3.3.9
Build-Jdk: 1.8.0_111
</code></pre></div></div>

<p>현재 설치된 jdk는 openjdk15이고, 빌드를 jdk1.8로 했으니 java의 문제는 아닌 것으로 보입니다.</p>

<h3 id="진찌-원인-jvm">진찌 원인: JVM</h3>
<p>셋팅의 문제는 아니라는 걸 파악했고, 이번에는 <code class="language-plaintext highlighter-rouge">jaydebeapi</code> 내부 코드를 살펴보았습니다. jaydebeapi는 내부에서 <code class="language-plaintext highlighter-rouge">jpype</code> 라이브러리를 이용하여 JVM을 실행하고, JVM 내에서 전달받은 jar파일의 클래스를 실행합니다.</p>

<p>아래 코드는 <code class="language-plaintext highlighter-rouge">jaydebeapi</code>에서 JVM 셋팅(classpath, librarypath, driver_args)을 하고, JVM을 시작합니다. 그런데, <code class="language-plaintext highlighter-rouge">if not jpype.isJVMStarted()</code> 조건 때문에 이미 실행 중인 JVM이 있는 경우에는 동작하지 않는 코드입니다. 실행되고 있는 JVM이 없는 경우에만 connect 객체 생성을 위해 전달한 <code class="language-plaintext highlighter-rouge">jars</code>가 JVM의 <code class="language-plaintext highlighter-rouge">Djava.libaray.path</code>에 포함될 수 있는 구조입니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">_jdbc_connect_jpype</span><span class="p">(</span><span class="n">jclassname</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">driver_args</span><span class="p">,</span> <span class="n">jars</span><span class="p">,</span> <span class="n">libs</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">jpype</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">jpype</span><span class="p">.</span><span class="n">isJVMStarted</span><span class="p">():</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">class_path</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">jars</span><span class="p">:</span>
            <span class="n">class_path</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span><span class="n">jars</span><span class="p">)</span>
        <span class="n">class_path</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span><span class="n">_get_classpath</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">class_path</span><span class="p">:</span>
            <span class="n">args</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">'-Djava.class.path=%s'</span> <span class="o">%</span>
                        <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">pathsep</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">class_path</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">libs</span><span class="p">:</span>
            <span class="c1"># path to shared libraries
</span>            <span class="n">libs_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">pathsep</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">libs</span><span class="p">)</span>
            <span class="n">args</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">'-Djava.library.path=%s'</span> <span class="o">%</span> <span class="n">libs_path</span><span class="p">)</span>
        <span class="c1"># jvm_path = ('/usr/lib/jvm/java-6-openjdk'
</span>        <span class="c1">#             '/jre/lib/i386/client/libjvm.so')
</span>        <span class="n">jvm_path</span> <span class="o">=</span> <span class="n">jpype</span><span class="p">.</span><span class="n">getDefaultJVMPath</span><span class="p">()</span>
        <span class="k">global</span> <span class="n">old_jpype</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">jpype</span><span class="p">,</span> <span class="s">'__version__'</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ver_match</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">match</span><span class="p">(</span><span class="s">'\d+\.\d+'</span><span class="p">,</span> <span class="n">jpype</span><span class="p">.</span><span class="n">__version__</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ver_match</span><span class="p">:</span>
                    <span class="n">jpype_ver</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ver_match</span><span class="p">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">jpype_ver</span> <span class="o">&lt;</span> <span class="mf">0.7</span><span class="p">:</span>
                        <span class="n">old_jpype</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">except</span> <span class="nb">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">old_jpype</span><span class="p">:</span>
            <span class="n">jpype</span><span class="p">.</span><span class="n">startJVM</span><span class="p">(</span><span class="n">jvm_path</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">jpype</span><span class="p">.</span><span class="n">startJVM</span><span class="p">(</span><span class="n">jvm_path</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">ignoreUnrecognized</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">convertStrings</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<p>따라서, jpype에 의해 이미 실행 중인 JVM이 존재한다면, oracle connector를 생성하기 위해 전달한 jar 파일은 어디에도 사용되지 않습니다. 프로그래머는 변수를 입력했지만, 코드 내부에서는 해당 변수가 어떤 곳에서도 사용되지 않습니다. 이런 경우에 JVM에 해당 jar 파일이 없으므로, Class not found가 발생하는 것도 이해가 됩니다.</p>

<p>실제로, 제가 작성 중인 코드에서 oracle connector를 생성하기 전에 mysql db와 연결하기 위한 다른 connector를 이미 생성해놓고 있었습니다. 따라서 아래와 같은 이유로 Class not found 에러가 발생했습니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">jpype</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">jaydebeapi</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">jclassname</span><span class="o">=</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="p">,</span>
                          <span class="n">url</span><span class="o">=</span><span class="s">"jdbc:mysql://host:port/"</span><span class="p">,</span>
                          <span class="n">jars</span> <span class="o">=</span> <span class="s">"mysql-connector-java-5.1.45.jar"</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"is JVM already started? </span><span class="si">{</span><span class="n">jpype</span><span class="p">.</span><span class="n">isJVMStarted</span><span class="p">()</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="c1"># 출력 결과: is JVM already started? True
# 이 상태에서 실행 중인 JVM의 Djava.class.path(CLASSPATH)에는 mysql-connector-java-5.1.45.jar만 존재
</span><span class="p">...</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">jaydebeapi</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">jclassname</span><span class="o">=</span><span class="s">"oracle.jdbc.driver.OracleDriver"</span><span class="p">,</span>
                          <span class="n">url</span><span class="o">=</span><span class="s">"jdbc:oracle://host:port/"</span><span class="p">,</span>
                          <span class="n">jars</span> <span class="o">=</span> <span class="s">"ojdb6.jar"</span><span class="p">)</span>
<span class="c1"># 이미 JVM이 실행 중이므로 jpype로 JVM을 시작하는 작업을 수행하지 않는다.
# 따라서 JVM의 CLASSPATH에는 mysql-connector-java-5.1.45.jar만 존재하므로, OracleDriver 클래스를 찾을 수 없다.
</span></code></pre></div></div>

<p><a href="https://github.com/baztian/jaydebeapi/issues/85#issuecomment-442851010">jaydebeapi github</a>를 들어가서 살펴보니 저와 동일한 현상에 대한 언급이 있었습니다.</p>

<blockquote>
  <p>Also, if you are pulling from multiple database connections, ie. making multiple jaydebeapi.connect() calls, the jars parameter in your first connection call must contain all of the paths to your jdbc jar files. Any jar parameter in subsequent connect() calls seems to be ignored.</p>
</blockquote>

<ul>
  <li>그냥 JVM을 shutdown했다가 재시작하면 안될까?<br />
jpype는 JVM을 종료(shutdown)하는 API도 제공합니다.
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">jpype</span><span class="p">.</span><span class="n">startJVM</span><span class="p">()</span>
<span class="n">jpype</span><span class="p">.</span><span class="n">shutdownJVM</span><span class="p">()</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>그렇다면 두번째 connector를 생성하기 전에 JVM을 종료하면 jar 파일을 다시 업로드할 수 있지 않을까 생각했습니다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">connector1</span> <span class="o">=</span> <span class="n">jaydebeapi</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">args1</span><span class="p">)</span>
<span class="n">jpype</span><span class="p">.</span><span class="n">shutdownJVM</span><span class="p">()</span>
<span class="n">connector2</span> <span class="o">=</span> <span class="n">jaydebeapi</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">args2</span><span class="p">)</span>
</code></pre></div></div>

<p>하지만, 아쉽게도 jpype는 JVM을 shutdown하면 재가동할 수 없습니다.</p>

<blockquote>
  <p>This method shuts down the JVM and disables access to existing Java objects. Due to limitations in the JPype, it is not possible to restart the JVM after being terminated.</p>
</blockquote>

<p>따라서 위와 같이 실행 시에는 에러(<code class="language-plaintext highlighter-rouge">OSError: JVM cannot be restarted</code>)가 발생합니다.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>OSError: JVM cannot be restarted
</code></pre></div></div>

<h3 id="해결책">해결책</h3>
<p>따라서 위 코드가 동작하려면 아래와 같이 첫번째 connect 생성 시에 모든 jar 파일을 추가해주어야합니다.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">conn</span> <span class="o">=</span> <span class="n">jaydebeapi</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">jclassname</span><span class="o">=</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="p">,</span>
                        <span class="n">url</span><span class="o">=</span><span class="s">"jdbc:mysql://host:port/"</span><span class="p">,</span>
                        <span class="n">jars</span> <span class="o">=</span> <span class="p">[</span><span class="s">"mysql-connector-java-5.1.45.jar"</span><span class="p">,</span> <span class="s">"ojdb6.jar"</span><span class="p">])</span>

<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"is JVM already started? </span><span class="si">{</span><span class="n">jpype</span><span class="p">.</span><span class="n">isJVMStarted</span><span class="p">()</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="c1"># 출력 결과: is JVM already started? True
# 이 상태에서 실행 중인 JVM의 Djava.libaray.path(CLASSPATH)에는 mysql-connector-java-5.1.45.jar와 ojdb6.jar가 추가됨
</span><span class="p">...</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">jaydebeapi</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">jclassname</span><span class="o">=</span><span class="s">"oracle.jdbc.driver.OracleDriver"</span><span class="p">,</span>
                        <span class="n">url</span><span class="o">=</span><span class="s">"jdbc:oracle://host:port/"</span><span class="p">,</span>
                        <span class="n">jars</span> <span class="o">=</span> <span class="s">"ojdb6.jar"</span> <span class="c1"># 이미 JVM에 해당 jar가 추가되었고, 두번째 connect()부터는 해당 옵션은 무시되므로 추가하지 않아도 된다
</span>                        <span class="p">)</span>
<span class="c1"># 이미 실행되고 있는 JVM에서 connector를 생성한다
</span></code></pre></div></div>

<p>[참고]<br />
<a href="https://github.com/baztian/jaydebeapi/issues/85#issuecomment-442851010">jaydebeapi github issues#85</a><br />
<a href="https://jpype.readthedocs.io/en/latest/api.html">jpype Document</a></p>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            <!-- 
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to Gyuhoon Kim</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email"  placeholder="youremail@example.com" />
    </div>
    <button class="" type="submit" disabled><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

                </section>
             -->

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/built/images/GyuhoonK.jpg" alt="GyuhoonK" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/GyuhoonK">GyuhoonK</a></h4>
                                
                                    <p>Read <a href="/author/GyuhoonK">more posts</a> by this author.</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/GyuhoonK">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            <!--  -->
            <!-- utteranc setting -->
            <script src="https://utteranc.es/client.js"
                    repo="GyuhoonK/blog-comments"
                    issue-term="pathname"
                    theme="github-light"
                    crossorigin="anonymous"
                    async>
            </script>

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/built/images/spain-blog-cover.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; Gyuhoon Kim &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/python/">Python</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/avro-to-python">Sharing Avro Schema to Python</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/decorator">변수를 전달하는 decorator</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/threading-in-python">Threading in Python</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/python/">
                                
                                    See all 4 posts  →
                                
                            </a>
                        </footer>
                    </article>
                <script type="text/javascript"
                src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
                </script>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/avro-to-python">
                <div class="post-card-image" style="background-image: url(/assets/built/images/python/avro-to-python.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/avro-to-python">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Python</span>
                            
                        
                    

                    <h2 class="post-card-title">Sharing Avro Schema to Python</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>DataHub에서 avro schema 파일(avsc)을 사용하는 방법

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/GyuhoonK.jpg" alt="GyuhoonK" />
                        
                        <span class="post-card-author">
                            <a href="/author/GyuhoonK/">GyuhoonK</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      3 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/decorator">
                <div class="post-card-image" style="background-image: url(/assets/built/images/python/decorator-comic-1.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/decorator">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Python</span>
                            
                        
                    

                    <h2 class="post-card-title">변수를 전달하는 decorator</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p>변수를 생성해 함수로 전달하는 데코레이터 만들기

</p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/GyuhoonK.jpg" alt="GyuhoonK" />
                        
                        <span class="post-card-author">
                            <a href="/author/GyuhoonK/">GyuhoonK</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      3 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://gyuhoonk.github.io/">
            
            <span>Gyuhoon Kim</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">jaydebeapi - Class not found Error</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=jaydebeapi+-+Class+not+found+Error&amp;url=https://gyuhoonk.github.iojaydebeapi_class_not_found"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://gyuhoonk.github.iojaydebeapi_class_not_found"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://gyuhoonk.github.io/">Gyuhoon Kim</a> &copy; 2026</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyllt/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                <h1 class="subscribe-overlay-title">Subscribe to Gyuhoon Kim</h1>
                <p class="subscribe-overlay-description">Stay up to date! Get all the latest &amp; greatest posts delivered straight to your inbox</p>
                <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email"  placeholder="youremail@example.com" />
    </div>
    <button class="" type="submit" disabled><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

            </div>
        </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-xxxxxxxx-x', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>
<script type="text/javascript" async
	src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
	MathJax.Hub.Config({
	extensions: ["tex2jax.js"],
	jax: ["input/TeX", "output/HTML-CSS"],
	tex2jax: {
		inlineMath: [ ['$','$'], ["\\(","\\)"] ],
		displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
		processEscapes: true
	},
	"HTML-CSS": { availableFonts: ["TeX"] }
});
</script>
    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->
    <!-- math LaTex-->
    
</body>
</html>
